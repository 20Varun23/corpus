<button class="btn btn-ghost btn-outline btn-circle fixed bottom-10 right-10" onclick="toggleTheme()">
    <span class="material-symbols-outlined" id="dark-mode-toggle">
    </span>
</button>

<script>
    $(document).ready(() => {
        const theme = localStorage.getItem("corpusTheme") || (window.matchMedia('(prefers-color-scheme: light)').matches ? "winter" : "night");
        const icon = theme == "winter" ? "dark_mode" : "light_mode";
        document.documentElement.setAttribute("data-theme", theme);
        $("#dark-mode-toggle").html(icon);
        updateIndex(theme);
    })

    const toggleTheme = () => {
        let theme = localStorage.getItem("corpusTheme") || "winter";
        theme = theme == "winter" ? "night" : "winter";
        const icon = theme == "winter" ? "dark_mode" : "light_mode";
        document.documentElement.setAttribute("data-theme", theme);
        $("#dark-mode-toggle").html(icon);
        updateIndex(theme);
        localStorage.setItem("corpusTheme", theme);
    }

    // TODO: Move to index.js and add an event listener to HTML attribute change instead
    // TODO: Verify that updating attributes in JS doesn't work
    const updateIndex = (theme) => {
        if (theme == "winter") {
            particlesJS.load('particles-js', '/static/js/particles.json');
        } else {
            particlesJS.load('particles-js', '/static/js/particles-dark.json');
        }
    }
</script>
